/* ====== LAYOUT Y SEPARACIÓN LATERAL ====== */
html, body { height: 100%; }
body{
  font-family: Arial, sans-serif;
  background-color:#365a66;
  margin:0;
  padding:40px 16px 16px;          /* separa el conjunto de los bordes y deja más altura útil */
  display:flex;
  justify-content:center;          /* centra el conjunto (dos paneles) */
  align-items:flex-start;
  gap:0;
}

/* Si existiera en otras vistas */
.app-container{
  display:flex;
  width:95%;
  max-width:1200px;
  background:#fff;
  border-radius:8px;
  box-shadow:0 4px 6px rgba(0,0,0,.1);
  overflow:hidden;
  min-height:calc(100vh - 60px);
  position: relative; /* Añadido para contener el elemento posicionado */
}

/* ====== DOS PANELES HERMANOS (tu HTML actual) ====== */
/* -- MUCHO MÁS ALTOS -- */
.form-section,
.table-section{
  box-sizing:border-box;
  /* Al menos 1200px de alto o prácticamente todo el viewport */
  min-height: max( calc(100vh - 20px), 800px );
}

.form-section{
  flex:0 0 38%;
  max-width:460px;
  padding:25px;
  background:#f8f9fa;
  border:1px solid #ddd;
  border-right:none;
  border-radius:8px 0 0 8px;
  box-shadow:0 4px 6px rgba(0,0,0,.1);
  position:relative;
  overflow-y:auto;
}

.table-section{
  flex:1 1 62%;
  max-width:820px;
  padding:2px;                     /* MÍNIMO: de 5px a 2px */
  padding-top: 35px;               /* REDUCIDO de 45px a 35px */
  display:flex;
  flex-direction:column;
  overflow:hidden; /* importante para que el hijo flex crezca hasta el 100% */
  background:#fff;
  border:1px solid #ddd;
  border-left:none;
  border-radius:0 8px 8px 0;
  box-shadow:0 4px 6px rgba(0,0,0,.1);
}

/* ====== TITULARES ====== */
h1{
  color:#333;
  font-size:1.5em;
  margin:0 0 3px;                  /* ULTRA REDUCIDO: de 8px a 3px */
  text-align:center;
  padding-bottom:2px;              /* ULTRA REDUCIDO: de 5px a 2px */
  border-bottom:2px solid #365a66;
}

/* ====== FORMULARIO ====== */
.form-group{ margin-bottom:15px; }
label{
  display:block;
  margin-bottom:5px;
  font-weight:bold;
  color:#555;
}
input[type="text"], select{
  width:100%;
  padding:10px;
  border:1px solid #ddd;
  border-radius:4px;
  box-sizing:border-box;
  font-size:1em;
  transition:border-color .3s;
  background:#fff;
}
input[type="text"]:focus, select:focus{
  border-color:#4CAF50;
  outline:none;
}

/* ====== BOTONES ====== */
.btn-confirmar{
  width:100%;
  padding:12px;
  background-color:#4CAF50;   /* verde ref */
  color:#fff;
  border:none;
  border-radius:4px;
  cursor:pointer;
  font-size:1em;
  margin-top:20px;
  transition:background-color .3s;
  display:flex; align-items:center; justify-content:center; gap:8px;
}
.btn-confirmar:hover{ background-color:#45a049; }

/* "Finalizar lote" (azul ref) */
.btn-completar{
  width:100%;
  padding:12px;
  background-color:#179288e5;
  color:#fff;
  border:none;
  border-radius:4px;
  cursor:pointer;
  font-size:1em;
  margin-top:8px;
  transition:background-color .3s;
  display:flex; align-items:center; justify-content:center; gap:8px;
}
.btn-completar:hover{ background-color:#179288e5; }

/* Si usas botón de descargar, lo igualamos al azul de referencia */
.btn-descargar{
  width:100%;
  padding:12px;
  background-color:#179288e5;
  color:#fff;
  border:none;
  border-radius:4px;
  cursor:pointer;
  font-size:1em;
  margin-top:8px;
  display:flex; align-items:center; justify-content:center; gap:8px;
}

/* SCRAP ON/OFF (id de tu HTML) */
#autoenter-toggle{
  width:100%;
  padding:10px 12px;
  border:none;
  border-radius:4px;
  cursor:pointer;
  font-size:1em;
  margin-top:10px;
  display:flex; align-items:center; justify-content:center; gap:8px;
  color:#fff;
  background-color:#dc3545;        /* OFF por defecto: rojo */
  transition:filter .2s, transform .02s;
}
#autoenter-toggle:hover{ filter:brightness(.95); }
#autoenter-toggle:active{ transform:scale(.995); }
#autoenter-toggle.is-on { background-color:#198754; } /* ON: verde */
#autoenter-toggle.is-off{ background-color:#dc3545; } /* OFF: rojo */

/* Volver (gris bootstrap-like) pegado abajo-izq del panel */
#volver-btn,
.btn-secondary,
.btn-volver{
  background-color:#6c757d;
  color:#fff;
  padding:10px 20px;
  font-size:1em;
  border:none;
  border-radius:4px;
  cursor:pointer;
  transition:background-color .3s;
}
#volver-btn{ position:absolute; left:10px; bottom:10px; }
#volver-btn:hover, .btn-volver:hover{ background-color:#5a6268; }

/* ====== BUSCADOR HISTORIAL ====== */
.historial-search{ margin:2px 0 2px; }     /* ULTRA REDUCIDO: de 5px a 2px */
.search-bar{ display:flex; align-items:center; gap:4px; } /* ULTRA REDUCIDO: de 6px a 4px */
.search-bar .search-icon{ font-size:1rem; opacity:.8; }
.search-input{
  flex:1;
  padding:6px 8px;                 /* REDUCIDO: de 10px 12px a 6px 8px */
  border:1px solid #ddd;
  border-radius:4px;
  font-size:.95rem;
  outline:none;
  transition:border-color .2s;
}
.search-input:focus{ border-color:#4CAF50; }
.clear-btn{
  border:1px solid #ddd;
  background:#f8f9fa;
  padding:6px 8px;                 /* REDUCIDO: de 8px 10px a 6px 8px */
  border-radius:4px;
  cursor:pointer;
  font-size:.9rem;
}
.clear-btn:hover{ background:#f1f3f5; }
.search-count{ font-size:.9rem; color:#555; white-space:nowrap; }

/* ====== TABLA ====== */
/* La "tarjeta" blanca se expande a TODO el alto disponible del panel derecho */
.table-container{
  flex: 1 1 auto;    /* ocupa el espacio restante del panel */
  min-height: 0;     /* evita overflow de flexbox */
  overflow:auto;
  border:1px solid #ddd;
  border-radius:4px;
  background:#fff;
  margin-right: 0px;               /* ELIMINADO completamente el margen derecho */
  margin-top: 0px;                 /* ELIMINADO margen superior */
}
.registros-table{
  width:100%;
  border-collapse:collapse;
  margin-top:0px;                  /* ELIMINADO completamente el margen superior */
  font-size:.9em;
}
.registros-table th{
  background-color:#365a66;
  color:#fff;
  padding:6px 8px;                 /* ULTRA REDUCIDO: de 10px a 6px 8px */
  text-align:left;
  position:sticky; top:0;
}
.registros-table td{ padding:4px 8px; border-bottom:1px solid #ddd; } /* ULTRA REDUCIDO: de 8px 10px a 4px 8px */
.registros-table tr:nth-child(even){ background-color:#f2f2f2; }
.registros-table tr:hover{ background-color:#e9e9e9; }
.fila-scrap td{ background:#fff3f3 !important; }

/* ====== BLOQUE DE USUARIO (CORREGIDO - ahora se mueve con el scroll) ====== */
.top-right{
  position: absolute;  
  top: 0; /* Pegado al borde superior */
  left: 0; /* Pegado al borde izquierdo */
  right: 0; /* Pegado al borde derecho */
  width: 100%; /* Ocupa todo el ancho disponible */
  display: flex; 
  align-items: center; 
  justify-content: flex-end; /* Alineado a la derecha */
  gap: 6px;                        /* REDUCIDO de 8px a 6px */
  z-index: 1001; 
  transition: opacity .22s ease, transform .22s ease;
  will-change: opacity, transform;
  padding: 8px 10px;               /* DRÁSTICAMENTE REDUCIDO */
  background-color: #365a66; /* Color azul sólido igual al header de la tabla */
  border-radius: 0; /* Sin bordes redondeados para que sea una barra completa */
  box-shadow: none; /* Sin sombra para que se vea como una barra continua */
}

/* Mover específicamente el área del usuario hacia la izquierda */
.top-right > * {
  margin-right: 30px;              /* ULTRA REDUCIDO: de 60px a 30px */
}
.top-right.hide-on-scroll{
  opacity:0;
  transform: translateY(-8px);
  pointer-events:none;
}
.user-icon{
  width: 35px; 
  height: 35px; 
  border-radius: 50%;
  object-fit: cover; 
  border: 2px solid #66b3b7;
}
.logout-icon{
  width: 18px; 
  height: 18px; 
  color: #fff; 
  cursor: pointer; 
  transition: transform .2s;
  margin: 0; /* Eliminado margin-top */
}
.logout-icon:hover{ 
  transform: scale(1.1); 
  opacity: .8; 
}
.username{ 
  font-size: 1.2rem; 
  font-weight: bold; 
  color: #fff; 
  text-align: center; /* Centrado del texto */
  white-space: nowrap; /* Evita que se rompa en líneas */
}

/* ====== RESPONSIVE ====== */
@media (max-width: 992px){
  .form-section{ flex:0 0 42%; max-width:420px; }
  .table-section{ flex:1 1 58%; max-width:unset; }
  .table-container{ margin-right: 0px; } /* ELIMINADO margen en tablets */
}
@media (max-width: 768px){
  body{ padding:56px 12px 14px; flex-direction:column; align-items:stretch; }
  .form-section, .table-section{
    width:100%;
    max-width:unset;
    min-height:auto;
    border-radius:8px;
    border:1px solid #ddd;
    box-shadow:0 4px 6px rgba(0,0,0,.1);
  }
  .form-section{ margin-bottom:14px; border-right:1px solid #ddd; }
  .table-section{ 
    border-left:1px solid #ddd; 
    padding-top: 30px;             /* ULTRA REDUCIDO: de 40px a 30px */
    padding-left: 2px;             /* ULTRA REDUCIDO: de 5px a 2px */
    padding-right: 2px;            /* ULTRA REDUCIDO: de 5px a 2px */
    padding-bottom: 2px;           /* ULTRA REDUCIDO: de 5px a 2px */
  }
  .table-container{ margin-right: 0px; } /* ELIMINADO margen en móviles */
  
  /* En móviles, mantenemos el usuario fijo para mejor UX */
  .top-right{
    position: fixed;
    padding: 4px 6px;              /* ULTRA REDUCIDO para móviles */
  }
}